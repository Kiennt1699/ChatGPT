<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vite + Vue + TS</title>
</head>

<body>
  <vue-element id="app"></vue-element>
  <script type="module" src="/src/main.ts"></script>
  <script type="module">
    if (import.meta.hot) {
      // Workaround for a strange Vite hot-reloading bug, see:
      // https://github.com/vitejs/vite/issues/7839#issuecomment-1340109679
      import.meta.hot.on('vite:beforeUpdate', onBeforeViteUpdate)
    }

    function onBeforeViteUpdate(event) {
      if (event.type === 'update') {
        // Patch `event.updates` to remove the version query parameter from path,
        // so that the update gets picked up.
        // Why the stored `deps` are missing this part of the URL, I cannot sayâ€¦
        const updates = []
        for (const update of event.updates) {
          updates.push(update, {
            ...update,
            acceptedPath: update.acceptedPath.replace(/\?v=[0-9a-f]+&/i, '?')
          })
        }
        event.updates = updates
      }
    }
  </script>
</body>

</html>